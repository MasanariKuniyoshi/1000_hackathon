<h1>Comments</h1>
<%= form_with(model: @comment, local: true) do |f| %>
    <%= f.label :コメントの追加 %>
    <%= f.text_field :content %>

    <%= f.hidden_field :id, :value => params[:id] %>
    
    <%= f.submit "作成", class: "btn btn-primary" %>
<% end %>

<% @contents.each do |content| %>
    <div>
        <p><%= content.user.name %></p>
        <div class="edit-show">
            <p><%= content.content %></p>
        </div>
        <button class="edit_button">edit</button>

        <%= form_with(local: true, url: comment_path(content), method: :patch, class: 'edit_form') do |f| %>
            <%= f.text_field :content %>
            <input type="button" class="edit_close" value="キャンセル">
            <%= f.submit "更新" ,class: "btn btn-green" %>
        <% end %>

        <%= link_to 'delete', comment_path(content), method: :delete %>
        <hr>
    </div>
<% end %>

<style>
    .edit_form{
        display: none;
    }
</style>

<script>
    $('.edit_button').click(function(){
        $(this).prev().hide();
        $(this).hide();
        $(this).next('.edit_form').show();
    })
    $('.edit_close').click(function(){
        $(this).parent('.edit_form').hide();
        $(this).parent().prevAll().show();
    })
</script>